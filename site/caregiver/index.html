<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Caregiver Services Agreement — Fast Legal Templates</title>
<meta name="description" content="Generate a court-ready Caregiver Services Agreement with clear scope, compensation, HIPAA, live-in rules, and Medicaid look-back language. Live preview. Secure Stripe checkout."/>
<link rel="canonical" href="https://fastlegaltemplates.com/caregiver"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- Tailwind & libs -->
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

<!-- Stripe Buy Button -->
<script async src="https://js.stripe.com/v3/buy-button.js"></script>

<style>
  :root{
    --ink:#111827;
    --muted:#6b7280;
    --emerald:#059669;
    --line:#e5e7eb;
  }
  body{font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;background:#f9fafb;color:var(--ink)}
  .draft-watermark{
    pointer-events:none;user-select:none;
    font-weight:900; letter-spacing:.04em;
    color:rgba(16,185,129,.10);
    font-size:clamp(28px,8vw,90px); /* toned down to avoid overlaying form */
  }
  .tip { font-weight:700; color:#065f46; margin-left:.35rem; cursor:help; }
  .no-copy{
    -webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;
  }
  .locked-badge{
    position:absolute;top:.5rem;right:.5rem;
    background:rgba(6,95,70,.10);color:#065f46;
    border:1px dashed #10b981;border-radius:.5rem;
    font-size:.75rem;padding:.2rem .45rem;font-weight:700;
  }
  .help-sub{font-size:.8rem;color:#4b5563}
  /* Prevent accidental text selection globally on buttons/labels only */
  button,label { user-select:none; }
</style>
</head>
<body class="text-gray-900">
  <header class="max-w-6xl mx-auto p-6 flex items-center justify-between">
    <div class="text-sm text-gray-600">Fast Legal Templates</div>
    <h1 class="text-2xl font-extrabold text-emerald-700">Caregiver Services Agreement</h1>
    <div class="text-xs text-gray-500">Secure Checkout</div>
  </header>

  <main class="max-w-6xl mx-auto p-6 grid lg:grid-cols-2 gap-6">
    <!-- LEFT: FORM -->
    <section class="bg-white border rounded-xl shadow p-5">
      <h2 class="text-xl font-bold mb-3">Step 1 — About You</h2>

      <label class="block text-sm font-medium mb-1">Your Email
        <span class="tip" title="Used on notices/receipt and (post-purchase) delivery. Provide an address you can access.">❓</span>
      </label>
      <input id="buyerEmail" class="border rounded w-full p-2 mb-3" placeholder="you@example.com"/>

      <label class="block text-sm font-medium mb-1">Your Name
        <span class="tip" title="Shows as purchaser/contact in file naming and for support lookups.">❓</span>
      </label>
      <input id="buyerName" class="border rounded w-full p-2 mb-4" placeholder="Your full name"/>

      <h2 class="text-xl font-bold mb-3">Step 2 — Parties & Basics</h2>

      <label class="block text-sm font-medium mb-1">Client (person receiving care)
        <span class="tip" title="Prints into the agreement; use the legal name to avoid identity disputes.">❓</span>
      </label>
      <input id="clientName" class="border rounded w-full p-2 mb-3" placeholder="Client Full Name"/>

      <label class="block text-sm font-medium mb-1">Caregiver
        <span class="tip" title="Identifies who owes duties. If using an agency, list the assigned caregiver if known.">❓</span>
      </label>
      <input id="caregiverName" class="border rounded w-full p-2 mb-3" placeholder="Caregiver Full Name"/>

      <label class="block text-sm font-medium mb-1">Arrangement Type
        <span class="tip" title="Controls employment status, taxes, and wage rules; misclassification can trigger penalties.">❓</span>
      </label>
      <select id="arrangementType" class="border rounded w-full p-2 mb-3">
        <option value="W-2 Employee">W-2 Employee</option>
        <option value="1099 Independent Contractor">1099 Independent Contractor</option>
      </select>

      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Start Date
            <span class="tip" title="Effective date for obligations and wage calculations. Changes usually need a written amendment.">❓</span>
          </label>
          <input type="date" id="startDate" class="border rounded w-full p-2 mb-3"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Care Location (city/state)
            <span class="tip" title="Determines governing wage/privacy rules—use the primary service location.">❓</span>
          </label>
          <input id="careLocation" class="border rounded w-full p-2 mb-3" placeholder="e.g., Scarsdale, NY"/>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Hourly Rate (or flat)
            <span class="tip" title="Compensation basis; may trigger minimum wage and overtime under applicable law.">❓</span>
          </label>
          <input id="payRate" class="border rounded w-full p-2 mb-3" placeholder="$28/hour or $X flat"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Pay Schedule
            <span class="tip" title="Payroll frequency; compliance required by wage-payment statutes.">❓</span>
          </label>
          <input id="paySchedule" class="border rounded w-full p-2 mb-3" placeholder="weekly / biweekly / monthly"/>
        </div>
      </div>

      <label class="block text-sm font-medium mb-1">Typical Hours / Days
        <span class="tip" title="Sets expectations; deviations affect overtime and termination rights.">❓</span>
      </label>
      <textarea id="hoursSchedule" class="border rounded w-full p-2 mb-4" rows="2" placeholder="e.g., Mon–Fri, 9am–5pm; occasional weekends"></textarea>

      <!-- Services -->
      <h2 class="text-xl font-bold mb-3">Step 3 — Service Categories & Details</h2>
      <p class="text-sm text-gray-600 mb-3">Check everything the caregiver will do, then add specifics.</p>

      <div class="space-y-3">
        <label class="flex items-start gap-2">
          <input type="checkbox" id="svcPersonal" class="mt-1"/>
          <span><strong>Personal Care</strong> (bathing, grooming, dressing, toileting, mobility assistance)
            <span class="tip" title="Hands-on care—state limits (transfer belts, two-person assist) to reduce injury/liability.">❓</span>
          </span>
        </label>
        <textarea id="svcPersonalDetails" class="border rounded w-full p-2" rows="2" placeholder="Describe limits or specifics (e.g., transfer belt, bathing schedule)"></textarea>

        <label class="flex items-start gap-2 mt-3">
          <input type="checkbox" id="svcMedical" class="mt-1"/>
          <span><strong>Medical/Health Support</strong> (medication reminders/administration, appointments, vitals)
            <span class="tip" title="Do not assign tasks beyond licensure; document scope (e.g., ‘reminders only, no injections’).">❓</span>
          </span>
        </label>
        <textarea id="svcMedicalDetails" class="border rounded w-full p-2" rows="2" placeholder="e.g., reminders only (no injections); record BP daily; accompany to cardiology visits"></textarea>

        <label class="flex items-start gap-2 mt-3">
          <input type="checkbox" id="svcHousehold" class="mt-1"/>
          <span><strong>Household Tasks</strong> (light housekeeping, laundry, dishes, meal prep, errands)
            <span class="tip" title="Be specific to avoid scope creep and wage/meal break disputes.">❓</span>
          </span>
        </label>
        <textarea id="svcHouseholdDetails" class="border rounded w-full p-2" rows="2" placeholder="e.g., vacuum weekly; laundry 1x/week; low-salt meals; groceries"/>

        <label class="flex items-start gap-2 mt-1">
          <input type="checkbox" id="svcCompanionship" class="mt-1"/>
          <span><strong>Companionship</strong> (social interaction, reading, hobbies, transportation)
            <span class="tip" title="Clarifies non-clinical support; prevents unintentional medical duties.">❓</span>
          </span>
        </label>
        <textarea id="svcCompanionshipDetails" class="border rounded w-full p-2" rows="2" placeholder="e.g., daily walk 20 min; read newspaper; senior center Fridays"></textarea>

        <label class="flex items-start gap-2">
          <input type="checkbox" id="svcOther" class="mt-1"/>
          <span><strong>Other services</strong> (add anything else)
            <span class="tip" title="Unlisted duties may be excluded in a dispute—include all material expectations.">❓</span>
          </span>
        </label>
        <textarea id="svcOtherDetails" class="border rounded w-full p-2" rows="2" placeholder="Describe any additional duties not listed above"></textarea>
      </div>

      <!-- Reimbursement -->
      <h2 class="text-xl font-bold mt-6 mb-3">Step 4 — Reimbursement Policy</h2>
      <label class="block text-sm font-medium mb-1">Reimburse pre-approved expenses?
        <span class="tip" title="Allows payback for client-related purchases; unclear rules cause disputes and tax issues.">❓</span>
      </label>
      <select id="reimburseAllowed" class="border rounded w-full p-2 mb-3">
        <option value="No">No</option>
        <option value="Yes">Yes</option>
      </select>

      <div id="reimburseBox" class="hidden">
        <p class="text-sm text-gray-600 mb-2">Pick required proof:</p>
        <div class="grid sm:grid-cols-2 gap-2 mb-2">
          <label class="flex items-center gap-2"><input type="checkbox" class="rbDoc" value="Original receipts"/> Original receipts</label>
          <label class="flex items-center gap-2"><input type="checkbox" class="rbDoc" value="Mileage log"/> Mileage log</label>
          <label class="flex items-center gap-2"><input type="checkbox" class="rbDoc" value="Itemized invoice"/> Itemized invoice</label>
          <label class="flex items-center gap-2"><input type="checkbox" class="rbDoc" value="Written pre-approval"/> Written pre-approval</label>
        </div>
        <label class="block text-sm font-medium mb-1">Other documentation (optional)
          <span class="tip" title="Extra proof (e.g., photo of purchase) can deter fraud; too strict may delay payback.">❓</span>
        </label>
        <input id="rbOtherText" class="border rounded w-full p-2 mb-3" placeholder="e.g., delivery photo or confirmation"/>
      </div>

      <!-- Insurance -->
      <h2 class="text-xl font-bold mt-6 mb-3">Step 5 — Insurance Requirement</h2>
      <label class="block text-sm font-medium mb-1">Caregiver must carry insurance?
        <span class="tip" title="Shifts risk to the caregiver’s carrier; absent coverage leaves the client exposed.">❓</span>
      </label>
      <select id="insuranceRequired" class="border rounded w-full p-2 mb-3">
        <option value="No">No</option>
        <option value="Yes">Yes</option>
      </select>

      <div id="insuranceBox" class="hidden">
        <div class="grid sm:grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium mb-1">Professional Liability (min)
              <span class="tip" title="Errors/omissions coverage for clinical tasks. Common floor: $1,000,000/claim.">❓</span>
            </label>
            <input id="insProf" class="border rounded w-full p-2 mb-3" placeholder="$1,000,000 per claim"/>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">General Liability (min)
              <span class="tip" title="Bodily injury/property damage. Common floor: $1,000,000/occurrence.">❓</span>
            </label>
            <input id="insGen" class="border rounded w-full p-2 mb-3" placeholder="$1,000,000 per occurrence"/>
          </div>
        </div>
      </div>

      <!-- Notices & contacts -->
      <h2 class="text-xl font-bold mt-6 mb-3">Step 6 — Notices & Contacts</h2>
      <div class="grid sm:grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Mandatory Reporting Contact (Name)
            <span class="tip" title="Designated person for critical safety/legal notices; no contact can delay response.">❓</span>
          </label>
          <input id="reportName" class="border rounded w-full p-2 mb-3" placeholder="e.g., Adult Child / POA"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Contact Phone/Email
            <span class="tip" title="Ensure fast delivery of time-sensitive notices. Keep it current.">❓</span>
          </label>
          <input id="reportInfo" class="border rounded w-full p-2 mb-3" placeholder="e.g., (555) 555-5555; name@email.com"/>
        </div>
      </div>

      <div class="grid sm:grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Security Monitoring in Common Areas?
            <span class="tip" title="If used, disclosure is necessary; misuse may violate privacy/recording laws.">❓</span>
          </label>
          <select id="monitoring" class="border rounded w-full p-2 mb-3">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Termination Notice Period (days)
            <span class="tip" title="Controls notice obligations; inconsistent terms risk wrongful termination claims.">❓</span>
          </label>
          <input id="noticeDays" class="border rounded w-full p-2 mb-3" placeholder="e.g., 14 or 30"/>
        </div>
      </div>

      <!-- Live-in -->
      <h2 class="text-xl font-bold mt-6 mb-3">Step 7 — Live-In / On-Call Details</h2>
      <label class="block text-sm font-medium mb-1">Live-in / Overnight?
        <span class="tip" title="Triggers special sleep-time, on-call, and lodging deduction rules under wage law.">❓</span>
      </label>
      <select id="liveInType" class="border rounded w-full p-2 mb-3">
        <option value="Live-Out">Live-Out</option>
        <option value="Overnight">Overnight</option>
        <option value="Live-In">Live-In</option>
      </select>

      <div id="liveInBox" class="hidden">
        <label class="block text-sm font-medium mb-1">Private living space description
          <span class="tip" title="Adequate quarters support lawful sleep-time exclusions and lodging credits.">❓</span>
        </label>
        <input id="quarters" class="border rounded w-full p-2 mb-3" placeholder="e.g., private bedroom, shared hall bathroom"/>

        <div class="grid sm:grid-cols-3 gap-3">
          <div>
            <label class="block text-sm font-medium mb-1">Sleep Time (hrs, max 8)
              <span class="tip" title="Non-compensable only if legal prerequisites (e.g., 5 hrs uninterrupted) are met.">❓</span>
            </label>
            <input id="sleepHours" type="number" min="0" max="8" class="border rounded w-full p-2 mb-3" placeholder="e.g., 8"/>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">On-call during sleep?
              <span class="tip" title="Interruptions are typically paid; inadequate rest can convert sleep time to paid hours.">❓</span>
            </label>
            <select id="onCall" class="border rounded w-full p-2 mb-3">
              <option value="No">No</option>
              <option value="Yes">Yes</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Room & Board deducted?
              <span class="tip" title="Permissible only with lawful valuations and written consent; misuse creates wage liability.">❓</span>
            </label>
            <select id="roomBoard" class="border rounded w-full p-2 mb-3">
              <option value="No">No</option>
              <option value="Yes">Yes</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Amenities -->
      <h2 class="text-xl font-bold mt-6 mb-3">Step 8 — Amenities</h2>
      <div class="grid sm:grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Kitchen Use
            <span class="tip" title="Defines personal meal prep rights; prevents meal break and wage disputes.">❓</span>
          </label>
          <select id="amenKitchen" class="border rounded w-full p-2 mb-3">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Laundry Use
            <span class="tip" title="Clarifies personal vs. client laundry to avoid misuse claims.">❓</span>
          </label>
          <select id="amenLaundry" class="border rounded w-full p-2 mb-3">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Internet/TV Use
            <span class="tip" title="Sets boundaries for personal use; supports productivity and privacy.">❓</span>
          </label>
          <select id="amenInternet" class="border rounded w-full p-2 mb-3">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Consume Client Food
            <span class="tip" title="Clarifies in-kind benefits and potential wage credit implications.">❓</span>
          </label>
          <select id="amenFood" class="border rounded w-full p-2 mb-3">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
        </div>
      </div>

      <!-- Bond/Medicaid/Notes -->
      <h2 class="text-xl font-bold mt-6 mb-3">Step 9 — Bond / Medicaid / Notes</h2>
      <label class="block text-sm font-medium mb-1">Fidelity Bond / Bondable?
        <span class="tip" title="Coverage for theft/fraud; ‘bondable’ means eligible after screening.">❓</span>
      </label>
      <select id="bondStatus" class="border rounded w-full p-2 mb-3">
        <option value="Neither required">Neither required</option>
        <option value="Yes, a Fidelity Bond has been obtained.">Yes, a Fidelity Bond has been obtained.</option>
        <option value="No, but the contract requires the Caregiver to be bondable.">No, but the contract requires the Caregiver to be bondable.</option>
      </select>

      <label class="block text-sm font-medium mb-1">Likely Medicaid within 5 years?
        <span class="tip" title="Look-back review scrutinizes payments; fair-market value language supports eligibility.">❓</span>
      </label>
      <select id="medicaid" class="border rounded w-full p-2 mb-3">
        <option value="No">No</option>
        <option value="Yes">Yes</option>
        <option value="I don't know">I don't know</option>
      </select>

      <h2 class="text-xl font-bold mt-4 mb-2">Notes (optional)
        <span class="tip" title="Printed verbatim; avoid sensitive data you don’t want disclosed.">❓</span>
      </h2>
      <textarea id="specialNotes" class="border rounded w-full p-2 mb-4" rows="3" placeholder="Any special instructions or limits to include verbatim"></textarea>

      <hr class="my-5"/>

      <!-- Checkout + Download -->
      <h2 class="text-xl font-bold mb-3">Step 10 — Checkout & Download</h2>
      <p class="help-sub mb-3">Complete payment to unlock copy & download. If you’ve already paid and returned here, the page will unlock automatically.</p>

      <!-- Stripe Buy Button -->
      <div class="mb-4">
        <!-- Replace both attributes below with your real values -->
        <stripe-buy-button
          buy-button-id="BUY_BUTTON_ID_HERE"
          publishable-key="PUBLISHABLE_KEY_HERE">
        </stripe-buy-button>
      </div>

      <!-- Download button (locked until paid) -->
      <button id="downloadNow" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed" disabled>
        Download Your Agreement
      </button>
      <div class="text-xs text-gray-500 mt-2" id="lockMsg">Copy & download are locked until payment is confirmed.</div>
    </section>

    <!-- RIGHT: PREVIEW -->
    <section class="bg-white border rounded-xl shadow p-5 relative">
      <h2 class="text-xl font-bold mb-3">Live Preview (updates as you type)</h2>
      <div class="relative min-h-[520px] border rounded p-3">
        <div id="lockBadge" class="locked-badge">Locked until purchase</div>
        <pre id="preview" class="text-sm whitespace-pre-wrap leading-5 no-copy"></pre>
        <div id="wm" class="draft-watermark absolute inset-0 flex items-center justify-center text-center">
          UNPAID DRAFT • COPY DISABLED
        </div>
      </div>
    </section>
  </main>

<script>
  // ----- PAID STATE via URL PARAM ?paid=1 -----
  const urlParams = new URLSearchParams(window.location.search);
  let isPaid = urlParams.get('paid') === '1';

  // ----- DOM refs -----
  const reimburseAllowed = document.getElementById('reimburseAllowed');
  const reimburseBox     = document.getElementById('reimburseBox');
  const insuranceRequired= document.getElementById('insuranceRequired');
  const insuranceBox     = document.getElementById('insuranceBox');
  const liveInType       = document.getElementById('liveInType');
  const liveInBox        = document.getElementById('liveInBox');
  const previewEl        = document.getElementById('preview');
  const wmEl             = document.getElementById('wm');
  const lockBadge        = document.getElementById('lockBadge');
  const downloadBtn      = document.getElementById('downloadNow');
  const lockMsg          = document.getElementById('lockMsg');

  function toggleBoxes() {
    if (reimburseAllowed && reimburseBox) {
      reimburseBox.classList.toggle('hidden', reimburseAllowed.value !== 'Yes');
    }
    if (insuranceRequired && insuranceBox) {
      insuranceBox.classList.toggle('hidden', insuranceRequired.value !== 'Yes');
    }
    if (liveInType && liveInBox) {
      const show = (liveInType.value === 'Overnight' || liveInType.value === 'Live-In');
      liveInBox.classList.toggle('hidden', !show);
    }
  }

  reimburseAllowed?.addEventListener('change', () => { toggleBoxes(); refreshPreview(); });
  insuranceRequired?.addEventListener('change', () => { toggleBoxes(); refreshPreview(); });
  liveInType?.addEventListener('change', () => { toggleBoxes(); refreshPreview(); });

  // Build agreement content
  function buildDraftContent() {
    const buyerEmail   = (document.getElementById('buyerEmail')?.value || '').trim();
    const buyerName    = (document.getElementById('buyerName')?.value || '').trim();
    const clientName   = (document.getElementById('clientName')?.value || '').trim();
    const caregiverName= (document.getElementById('caregiverName')?.value || '').trim();
    const arrangement  = document.getElementById('arrangementType')?.value || '';
    const startDate    = document.getElementById('startDate')?.value || '';
    const careLocation = (document.getElementById('careLocation')?.value || '').trim();
    const payRate      = (document.getElementById('payRate')?.value || '').trim();
    const paySchedule  = (document.getElementById('paySchedule')?.value || '').trim();
    const hours        = (document.getElementById('hoursSchedule')?.value || '').trim();

    // services
    const svc = [];
    if (document.getElementById('svcPersonal')?.checked) {
      svc.push({label: "Personal Care", details: (document.getElementById('svcPersonalDetails')?.value || '').trim()});
    }
    if (document.getElementById('svcMedical')?.checked) {
      svc.push({label: "Medical/Health Support", details: (document.getElementById('svcMedicalDetails')?.value || '').trim()});
    }
    if (document.getElementById('svcHousehold')?.checked) {
      svc.push({label: "Household Tasks", details: (document.getElementById('svcHouseholdDetails')?.value || '').trim()});
    }
    if (document.getElementById('svcCompanionship')?.checked) {
      svc.push({label: "Companionship", details: (document.getElementById('svcCompanionshipDetails')?.value || '').trim()});
    }
    if (document.getElementById('svcOther')?.checked) {
      svc.push({label: "Other Services", details: (document.getElementById('svcOtherDetails')?.value || '').trim()});
    }
    const svcLines = svc.length ? svc.map(s => `• ${s.label}${s.details ? ` — ${s.details}` : ""}`).join('\n') : "• (No services selected)";

    // reimbursement
    const reimb = document.getElementById('reimburseAllowed')?.value || 'No';
    let rbDocs = [];
    document.querySelectorAll('.rbDoc:checked').forEach(cb => rbDocs.push(cb.value));
    const rbOther = (document.getElementById('rbOtherText')?.value || '').trim();
    const reimbBlock = reimb === 'Yes'
      ? `Reimbursement: Allowed for pre-approved, necessary expenses incurred on behalf of the Client.
Required documentation: ${rbDocs.length ? rbDocs.join(', ') : "as requested"}${rbOther ? `; Other: ${rbOther}` : ""}.`
      : `Reimbursement: Not allowed without prior written approval.`;

    // insurance
    const insReq = document.getElementById('insuranceRequired')?.value || 'No';
    const insProf = (document.getElementById('insProf')?.value || '').trim();
    const insGen  = (document.getElementById('insGen')?.value || '').trim();
    const insuranceBlock = insReq === 'Yes'
      ? `Caregiver Insurance: Required. Minimum coverage: Professional Liability ${insProf || "(specify)"}; General Liability ${insGen || "(specify)"}.`
      : `Caregiver Insurance: Not required under this Agreement (unless required by law).`;

    // notices
    const reportName = (document.getElementById('reportName')?.value || '').trim();
    const reportInfo = (document.getElementById('reportInfo')?.value || '').trim();
    const monitoring = document.getElementById('monitoring')?.value || 'No';
    const noticeDays = (document.getElementById('noticeDays')?.value || '').trim();

    // live-in
    const liveIn = document.getElementById('liveInType')?.value || 'Live-Out';
    const quarters = (document.getElementById('quarters')?.value || '').trim();
    const sleepHours = (document.getElementById('sleepHours')?.value || '').trim();
    const onCall = document.getElementById('onCall')?.value || 'No';
    const roomBoard = document.getElementById('roomBoard')?.value || 'No';

    // amenities
    const amenKitchen = document.getElementById('amenKitchen')?.value || 'No';
    const amenLaundry = document.getElementById('amenLaundry')?.value || 'No';
    const amenInternet = document.getElementById('amenInternet')?.value || 'No';
    const amenFood = document.getElementById('amenFood')?.value || 'No';

    // bond/medicaid/notes
    const bondStatus = document.getElementById('bondStatus')?.value || 'Neither required';
    const medicaid   = document.getElementById('medicaid')?.value || 'No';
    const specialNotes = (document.getElementById('specialNotes')?.value || '').trim();

    // clauses
    const hipaa = `Confidentiality and Privacy (HIPAA Compliance)
The Caregiver acknowledges access to private, confidential, and protected health information (PHI) relating to the Client and agrees:
1) To maintain the strict confidentiality of all Client information;
2) Not to disclose such information to third parties without the Client's or legal representative's explicit written consent, unless required by law; and
3) To comply with all applicable state and federal privacy laws, including HIPAA, to the extent applicable.`;

    const indemn = `Indemnification
The Caregiver agrees to indemnify and hold harmless the Client from and against any and all claims, losses, damages, or liability arising from the Caregiver’s negligence, gross misconduct, or intentional acts.`;

    const amenitiesTable =
`Amenity                 | Permitted? | Notes
------------------------|------------|------
Kitchen / Appliances    | ${amenKitchen}    | ${amenKitchen === 'Yes' ? 'Use allowed during breaks for personal meals.' : 'Only for Client meal prep.'}
Laundry (Washer/Dryer)  | ${amenLaundry}    | ${amenLaundry === 'Yes' ? 'Personal clothing permitted.' : 'Client linens only.'}
Internet / TV           | ${amenInternet}    | ${amenInternet === 'Yes' ? 'Personal use ok (limited bandwidth).' : 'No personal use during service hours.'}
Food / Groceries        | ${amenFood}    | ${amenFood === 'Yes' ? 'May consume household food.' : 'Not permitted unless provided.'}`;

    const monitoringLine = (monitoring === 'Yes')
      ? 'NOTICE: Video and/or audio monitoring is in use in common areas only (never in private rooms).'
      : 'Monitoring: None in use.';

    const liveInBlock = (liveIn === 'Live-Out')
      ? 'Arrangement: Live-Out.'
      : `Arrangement: ${liveIn}
Private Quarters: ${quarters || '(describe)'}
Sleep Time: ${sleepHours || '0'} hours designated as non-compensable (if legal requirements are met)
On-Call During Sleep: ${onCall}
Room & Board Deduction: ${roomBoard}`;

    const medicaidBlock = (medicaid === 'No') ? '' :
`Medicaid Look-Back Warning
If the Care Recipient applies for Medicaid Long-Term Care within the 5-year look-back period, payments under this contract may be scrutinized. The Parties affirm compensation and duties are Fair Market Value to protect eligibility.`;

    const scopeLines =
`Scope of Services
${svcLines}

${reimbBlock}

${insuranceBlock}`;

    const content = `
CAREGIVER SERVICES AGREEMENT

Client: ${clientName || "[Client Name]"}
Caregiver: ${caregiverName || "[Caregiver Name]"}
Arrangement Type: ${arrangement}
Start Date: ${startDate || "[Start Date]"}
Care Location: ${careLocation || "[City/State]"}

Compensation
Rate: ${payRate || "[Rate]"}
Pay Schedule: ${paySchedule || "[Schedule]"}
Typical Hours/Days: ${hours || "[e.g., Mon–Fri, 9am–5pm]"}

${scopeLines}

${hipaa}

${indemn}

Mandatory Reporting
Contact: ${reportName || "[Name]"} — ${reportInfo || "[Phone/Email]"}

Security / Monitoring
${monitoringLine}

Live-In / Overnight
${liveInBlock}

Amenities
${amenitiesTable}

Termination
Either party may terminate with ${noticeDays || "[X]"} days’ written notice. For cause (e.g., abuse, theft, gross negligence, breach of confidentiality), termination may be immediate.

${medicaidBlock}

Special Notes (if any)
${specialNotes || "(none)"}

Signatures
Client: ____________________________   Date: _____________
Caregiver: _________________________   Date: _____________
`.trim();

    const nameForFile = (clientName || caregiverName || 'Customer').replace(/[^a-z0-9\- ]+/gi,'_');
    return { content, product: "Caregiver Services Agreement", name: nameForFile, email: buyerEmail };
  }

  function refreshPreview() {
    const { content } = buildDraftContent();
    previewEl.textContent = content;
  }

  function wireLivePreview() {
    const inputs = document.querySelectorAll('input, textarea, select');
    inputs.forEach(el => {
      const evt = (el.type === 'checkbox' || el.tagName === 'SELECT') ? 'change' : 'input';
      el.addEventListener(evt, refreshPreview);
    });
  }

  // ----- Copy/selection lock (until paid) -----
  function lockContext(e){ if(!isPaid){ e.preventDefault(); } }
  function keyGuard(e){
    if(isPaid) return;
    const mac = navigator.platform.toUpperCase().indexOf('MAC')>=0;
    const mod = mac ? e.metaKey : e.ctrlKey;
    if(mod && (e.key.toLowerCase()==='c' || e.key.toLowerCase()==='a')){
      e.preventDefault(); e.stopPropagation();
    }
  }
  function applyLockState(){
    if(isPaid){
      previewEl.classList.remove('no-copy');
      document.removeEventListener('keydown', keyGuard, true);
      previewEl.removeEventListener('contextmenu', lockContext);
      wmEl.textContent = 'PAID — PREVIEW UNLOCKED';
      wmEl.style.color = 'rgba(16,185,129,.16)';
      lockBadge.style.display = 'none';
      downloadBtn.disabled = false;
      lockMsg.textContent = 'Payment confirmed — you can now download and copy your agreement.';
    }else{
      previewEl.classList.add('no-copy');
      document.addEventListener('keydown', keyGuard, true);
      previewEl.addEventListener('contextmenu', lockContext, { passive:false });
      wmEl.textContent = 'UNPAID DRAFT • COPY DISABLED';
      wmEl.style.color = 'rgba(16,185,129,.10)';
      lockBadge.style.display = 'inline-block';
      downloadBtn.disabled = true;
      lockMsg.textContent = 'Copy & download are locked until payment is confirmed.';
    }
  }

  // ----- Download handler (enabled after payment) -----
  downloadBtn.addEventListener('click', () => {
    if(!isPaid){
      alert('Please complete checkout first.');
      return;
    }
    const { content, name } = buildDraftContent();
    const email = (document.getElementById('buyerEmail')?.value || '').trim();
    if(!email){
      if(!confirm('No email entered. Continue to download anyway?')) return;
    }
    const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
    saveAs(blob, `${name}_Caregiver_Agreement.txt`);
  });

  // ----- Init -----
  toggleBoxes();
  wireLivePreview();
  refreshPreview();
  applyLockState();

  // Optional: allow quick manual unlock for admin testing via ?demo=1
  if(urlParams.get('demo')==='1' && !isPaid){
    isPaid = true;
    applyLockState();
  }
</script>
</body>
</html>

